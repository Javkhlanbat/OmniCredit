<!DOCTYPE html>
<html lang="mn">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OmniCredit — Зээлийн тооцоолуур</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --gradient1: linear-gradient(135deg, #22d3ee, #47875D);
      --gradient2: linear-gradient(135deg, #000000, #8b5cf6);
      --bg: #f9fafb;
      --text: #111827;
      --card: #fff;
      --line: #e5e7eb;
      --shadow: 0 10px 30px rgba(0, 0, 0, .08);
      --radius: 22px;
      --radius-lg: 26px
    }

    * {
      box-sizing: border-box
    }

    body {
      margin: 0;
      font-family: 'Inter', system-ui, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--bg);
      color: var(--text)
    }

    .container {
      max-width: 1180px;
      margin: 0 auto;
      padding: 24px
    }

    .nav {
      display: flex;
      align-items: center;
      justify-content: space-between
    }

    .brand {
      font-weight: 800
    }

    .nav a {
      margin-left: 16px;
      text-decoration: none;
      color: var(--text);
      font-weight: 600;
      position: relative
    }

    .nav a::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: -4px;
      height: 2px;
      width: 0;
      background: var(--gradient1);
      transition: .3s
    }

    .nav a:hover::after {
      width: 100%
    }

    .hero {
      margin-top: 18px;
      background: radial-gradient(1200px 280px at 20% -10%, rgba(34, 211, 238, .25), transparent), radial-gradient(800px 240px at 90% -20%, rgba(74, 222, 128, .22), transparent), #0b1220;
      color: #e5f7f1;
      border-radius: 26px;
      padding: 28px
    }

    .hero h1 {
      margin: 0 0 8px;
      font-size: 34px
    }

    .hero p {
      margin: 0;
      color: #cfe6df
    }

    /* Tabs */
    .info-tabs {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin: 18px 0
    }

    .btnprimary {
      background: var(--gradient1);
      color: #f10000;
      padding: 14px 16px;
      border: none;
      border-radius: 999px;
      font-weight: 800;
      cursor: pointer;
      box-shadow: var(--shadow);
      transition: .3s
    }

    .info-tabs label {
      background: var(--card);
      border-radius: 999px;
      box-shadow: var(--shadow);
      padding: 14px 16px;
      text-align: center;
      font-weight: 800;
      cursor: pointer;
      border: 1px solid var(--line);
      user-select: none
    }

    input#i-cond:checked~.info-tabs label[for=i-cond],
    input#i-req:checked~.info-tabs label[for=i-req],
    input#i-faq:checked~.info-tabs label[for=i-faq] {
      background: linear-gradient(135deg, #22d3ee, #4ade80);
      color: #fff;
      border-color: transparent
    }

    .info-pane-wrap {
      border-radius: var(--radius-lg);
      overflow: hidden
    }

    .pane {
      display: none;
      padding: 16px 18px;
      background: #fff
    }

    input#i-cond:checked~.info-pane-wrap #pane-conditions {
      display: block
    }

    input#i-req:checked~.info-pane-wrap #pane-requirements {
      display: block
    }

    input#i-faq:checked~.info-pane-wrap #pane-faq {
      display: block
    }

    .pane h3 {
      margin: 0 0 12px
    }

    .pane table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0 8px
    }

    .pane th {
      text-align: left;
      white-space: nowrap;
      padding-right: 10px
    }

    .grid {
      display: grid;
      grid-template-columns: 360px 1fr;
      gap: 22px;
      margin-top: 22px
    }

    .card {
      background: var(--card);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow)
    }

    .pad {
      padding: 18px
    }

    .card h3 {
      margin: 0 0 12px
    }

    .control {
      margin-bottom: 18px
    }

    .control label {
      display: block;
      font-weight: 700;
      margin-bottom: 6px
    }

    .display {
      display: flex;
      align-items: center;
      gap: 8px;
      background: #fff;
      border: 1px solid #e5e7eb;
      border-radius: 16px;
      padding: 12px 14px;
      box-shadow: 0 6px 16px rgba(0, 0, 0, .06);
      font-weight: 800
    }

    .display input[type=number] {
      width: 100%;
      background: transparent;
      border: none;
      font: inherit;
      color: #0ea5e9;
      outline: none;
      text-align: right;
      font-size: 32px
    }

    input[type=range] {
      width: 100%;
      -webkit-appearance: none;
      height: 6px;
      border-radius: 999px;
      background: linear-gradient(90deg, #ede9fe, #e5e7eb)
    }

    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 18px;
      height: 18px;
      background: #22d3ee;
      border-radius: 50%;
      box-shadow: 0 0 0 3px #fff, 0 6px 16px rgba(0, 0, 0, .15);
      cursor: pointer
    }

    .kpis-wide {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 14px;
      margin-top: 14px
    }

    .kpi {
      background: #0b1220;
      color: #dff7ff;
      border: 1px solid #1f2a44;
      border-radius: 18px;
      padding: 14px;
      text-align: center
    }

    .kpi b {
      display: block;
      font-size: 20px;
      margin-top: 4px;
      background: var(--gradient1);
      -webkit-background-clip: text;
      color: transparent
    }

    .chart-tabs {
      display: flex;
      gap: 12px;
      margin-bottom: 10px
    }

    .chart-tabs label {
      padding: 10px 14px;
      border-radius: 999px;
      background: #fff;
      border: 1px solid #e5e7eb;
      cursor: pointer;
      font-weight: 700;
      color: #4b5563;
      box-shadow: 0 6px 14px rgba(0, 0, 0, .06)
    }

    input#c-pay:checked~.chart-tabs label[for=c-pay],
    input#c-bal:checked~.chart-tabs label[for=c-bal] {
      background: linear-gradient(135deg, #22d3ee, #4ade80);
      color: #fff;
      border-color: transparent;
      box-shadow: 0 10px 22px rgba(34, 211, 238, .28)
    }

    .panel {
      display: none
    }

    input#c-pay:checked~.panels #panel-pay {
      display: block
    }

    input#c-bal:checked~.panels #panel-bal {
      display: block
    }

    .chart-tip {
      position: fixed;
      z-index: 50;
      pointer-events: none;
      background: #fff;
      border: 1px solid #e5e7eb;
      box-shadow: 0 10px 24px rgba(0, 0, 0, .12);
      border-radius: 12px;
      padding: 10px 12px;
      min-width: 180px;
      font: 13px/1.35 'Inter', system-ui, sans-serif;
      color: #0f172a;
      transform: translate(-50%, -110%);
      display: none
    }

    .chart-tip b {
      display: block;
      font-size: 14px;
      margin-bottom: 4px
    }

    .chart-tip .row {
      display: flex;
      justify-content: space-between;
      gap: 10px
    }

    .chart-tip .v {
      font-weight: 700;
      color: #1d4ed8
    }

    @media(max-width:980px) {
      .grid {
        grid-template-columns: 1fr
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <nav class="nav">
      <div class="brand">OMNICREDIT</div>
      <div>
        <a href="Nuurhuudas.html">Нүүр</a>
        <a href="">Бидний тухай</a>
        <a href="#">Бүтээгдэхүүн</a>
        <a href="#">Хамтрагчид</a>
        <a href="#">Нэвтрэх</a>
        <a href="#">Бүртгүүлэх</a>
      </div>
    </nav>

    <header class="hero">
      <h1>Зээлийн тооцоолуур</h1>
      <p>Тооцоогоо бодоод, онлайнаар хүсэлтээ илгээгээрэй. Танд хамгийн тохирох нөхцлийг санал болгоно.</p>
    </header>

    <input type="radio" name="info" id="i-cond" checked hidden>
    <input type="radio" name="info" id="i-req" hidden>
    <input type="radio" name="info" id="i-faq" hidden>

    <div class="info-tabs">
      <label for="i-cond">Үйлчилгээний нөхцөл</label>
      <label for="i-req">Тавигдах шаардлага</label>
      <label for="i-faq">Түгээмэл асуулт</label>
    </div>

    <div class="card pad info-pane-wrap">
      <div class="pane" id="pane-conditions">
        <h3>Ерөнхий нөхцөл</h3>
        <table>
          <tr>
            <th>Зорилго</th>
            <td>Хэрэглээний зээл</td>
            <th>Хугацаа</th>
            <td>3–60 сар</td>
          </tr>
          <tr>
            <th>Хүү</th>
            <td>Сард 0% – 3.3%</td>
            <th>Барьцаа</th>
            <td>Шаардлагагүй</td>
          </tr>
          <tr>
            <th>Хязгаар</th>
            <td>₮10,000 – ₮3,000,000</td>
            <th>Хураамж</th>
            <td>0–1%</td>
          </tr>
        </table>
      </div>
      <div class="pane" id="pane-requirements">
        <h3>Тавигдах шаардлага</h3>
        <ul>
          <li>Монгол Улсын иргэн</li>
          <li>Тогтмол орлоготой</li>
          <li>Идэвхтэй банкны данстай</li>
        </ul>
      </div>
      <div class="pane" id="pane-faq">
        <h3>Түгээмэл асуулт</h3>
        <details>
          <summary>Урьдчилан төлбөл торгуультай юу?</summary>
          <div>Үгүй, хугацаанаас өмнө төлсөн тохиолдолд нэмэлт шимтгэлгүй.</div>
        </details>
        <details>
          <summary>Шийдвэр хэдий хугацаанд гарах вэ?</summary>
          <div>Урьдчилсан шийдвэр минутын дотор гарна.</div>
        </details>
      </div>
    </div>

    <section class="grid" id="calculator">
      <div class="card pad">
        <h3>Тохиргоо</h3>

        <div class="control">
          <label>Зээлийн дүн</label>
          <div class="display">
            <span>₮</span>
            <input id="amountNum" type="number" value="1500000" min="10000" max="3000000" step="10000"
              inputmode="numeric" />
          </div>
          <input id="amountRange" type="range" min="10000" max="3000000" step="10000" value="1500000" />
          <div style="display:flex;justify-content:space-between;font-size:12px;color:#94a3b8;margin-top:6px">
            <span>₮10,000</span><span>₮3,000,000</span>
          </div>
        </div>

        <div class="control">
          <label>Сарын хүү (%)</label>
          <div class="display">
            <input id="rateNum" type="number" value="2" min="0" max="3.3" step="0.1" /><span>%</span>
          </div>
          <input id="rateRange" type="range" min="0" max="3.3" step="0.1" value="2" />
        </div>

        <div class="control">
          <label>Зээлийн хугацаа (сар)</label>
          <div class="display">
            <input id="termNum" type="number" value="12" min="1" max="60" step="1" /><span>сар</span>
          </div>
          <input id="termRange" type="range" min="1" max="60" step="1" value="12" />
        </div>

        <div class="cta">
          <button class="btn primary" id="applyBtn">Хүсэлт илгээх</button>
          <button class="btn ghost" id="pdfBtn">PDF хадгалах</button>
        </div>
      </div>

      <div class="card pad">
        <input type="radio" name="chart" id="c-pay" checked hidden>
        <input type="radio" name="chart" id="c-bal" hidden>
        <div class="chart-tabs">
          <label for="c-pay">Төлөлтийн график</label>
          <label for="c-bal">Үлдэгдлийн график</label>
        </div>
        <div class="panels">
          <div id="panel-pay" class="panel"><canvas id="paymentsChart" width="800" height="360"></canvas></div>
          <div id="panel-bal" class="panel"><canvas id="balanceChart" width="800" height="360"></canvas></div>
        </div>
      </div>
    </section>

    <section class="kpis-wide">
      <div class="kpi">Сарын төлбөр<b id="kpiPayment">—</b></div>
      <div class="kpi">Нийт хүү<b id="kpiInterest">—</b></div>
      <div class="kpi">Нийт төлөх<b id="kpiTotal">—</b></div>
    </section>
  </div>

  <div id="chartTip" class="chart-tip"></div>

  <script>
    const fmt = new Intl.NumberFormat('mn-MN');
    const money = n => '₮' + fmt.format(Math.round(n || 0));
    const clamp = (v, min, max) => Math.min(Math.max(v, min), max);
    function computeSchedule(P, ratePct, n) {
      P = Math.max(10000, +P || 0);
      n = Math.max(1, Math.floor(+n || 0));
      const r = (+ratePct || 0) / 100;
      let payment, bal = P, sch = [];
      if (r === 0) {
        payment = P / n;
        for (let m = 1; m <= n; m++) {
          const interest = 0, principal = payment;
          bal = Math.max(0, bal - principal);
          sch.push({ m, interest, principal, payment, bal });
        }
      } else {
        payment = P * r / (1 - Math.pow(1 + r, -n));
        for (let m = 1; m <= n; m++) {
          const interest = bal * r, principal = Math.min(payment - interest, bal);
          bal = Math.max(0, bal - principal);
          sch.push({ m, interest, principal, payment, bal });
        }
      }
      return {
        payment,
        totalInterest: sch.reduce((s, x) => s + x.interest, 0),
        totalPay: sch.reduce((s, x) => s + x.payment, 0),
        schedule: sch
      };
    }
    const amountNum = document.getElementById('amountNum'), amountRange = document.getElementById('amountRange');
    const rateNum = document.getElementById('rateNum'), rateRange = document.getElementById('rateRange');
    const termNum = document.getElementById('termNum'), termRange = document.getElementById('termRange');
    const kpiPayment = document.getElementById('kpiPayment'), kpiInterest = document.getElementById('kpiInterest'), kpiTotal = document.getElementById('kpiTotal');
    const paymentsCanvas = document.getElementById('paymentsChart'), balanceCanvas = document.getElementById('balanceChart');
    const tip = document.getElementById('chartTip');
    function bind(a, b, min, max) {
      const upd = v => {
        v = clamp(+v || 0, min, max);
        a.value = v; b.value = v; recalc();
      };
      a.addEventListener('input', () => upd(a.value));
      b.addEventListener('input', () => upd(b.value));
    }
    bind(amountNum, amountRange, 10000, 3000000);
    bind(rateNum, rateRange, 0, 3.3);
    bind(termNum, termRange, 1, 60);

    function clearCanvas(ctx) {
      ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height); ctx.fillStyle = '#fff';
      ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
    }

    function drawPayments(schedule, hover = -1) {
      const ctx = paymentsCanvas.getContext('2d');
      clearCanvas(ctx);
      const W = ctx.canvas.width, H = ctx.canvas.height, margin = 40, innerW = W - margin * 2, innerH = H - margin * 2;
      ctx.strokeStyle = '#e5e7eb';
      ctx.setLineDash([4, 4]);
      ctx.strokeRect(margin, margin, innerW, innerH);
      ctx.setLineDash([]);
      const bars = Math.min(12, schedule.length), maxPay = Math.max(...schedule.map(s => s.payment));
      const slot = innerW / bars, bw = slot * 0.72, gap = slot * 0.28;
      ctx.font = '12px Inter, system-ui'; ctx.textAlign = 'center';
      ctx.textBaseline = 'top';
      for (let i = 0; i < bars; i++) {
        const s = schedule[i], x = margin + i * slot + gap / 2, yB = H - margin;
        const totalH = innerH * (s.payment / maxPay), intH = innerH * (s.interest / maxPay), prinH = Math.max(0, totalH - intH);
        if (i === hover) {
          ctx.fillStyle = 'rgba(148,163,184,.35)';
          ctx.fillRect(x - gap / 2, margin, bw + gap, innerH);
        }
        ctx.fillStyle = '#f59e0b';
        ctx.fillRect(x, yB - intH, bw, intH);
        ctx.fillStyle = '#10b981';
        ctx.fillRect(x, yB - intH - prinH, bw, prinH);
        ctx.fillStyle = '#4b5563';
        ctx.fillText(`${i + 1}-р сар`, x + bw / 2, yB + 6);
      }
      ctx.fillStyle = '#111827';
      ctx.textAlign = 'center'; ctx.textBaseline = 'alphabetic';
      ctx.font = '16px Inter, system-ui';
      ctx.fillText('Зээл төлөлтийн график', W / 2, 24);
      ctx.font = '12px Inter, system-ui';
      ctx.textAlign = 'left';
      ctx.fillStyle = '#f59e0b';
      ctx.fillRect(margin, margin - 14, 10, 10);
      ctx.fillStyle = '#111827';
      ctx.fillText('Бодогдсон хүү', margin + 16, margin - 6);
      ctx.fillStyle = '#10b981';
      ctx.fillRect(margin + 120, margin - 14, 10, 10);
      ctx.fillStyle = '#111827';
      ctx.fillText('Үндсэн зээл', margin + 136, margin - 6);
      return { margin, slot, bars, innerW, innerH, bw, gap };
    }

    function drawBalance(schedule, P, hover = -1) {
      const ctx = balanceCanvas.getContext('2d'); clearCanvas(ctx);
      const W = ctx.canvas.width, H = ctx.canvas.height, margin = 40, innerW = W - margin * 2, innerH = H - margin * 2, n = schedule.length;
      ctx.strokeStyle = '#e5e7eb';
      ctx.setLineDash([4, 4]); ctx.strokeRect(margin, margin, innerW, innerH);
      ctx.setLineDash([]);
      const pts = [];
      for (let i = 0; i < n; i++) {
        const x = margin + innerW * (i / (n - 1)), bal = P * (1 - i / (n - 1)), y = H - margin - innerH * (bal / P);
        pts.push([x, y, bal]);
      }

      ctx.beginPath(); ctx.moveTo(pts[0][0], pts[0][1]);
      for (let i = 1; i < pts.length; i++) ctx.lineTo(pts[i][0], pts[i][1]);
      ctx.lineTo(margin + innerW, H - margin); ctx.lineTo(margin, H - margin); ctx.closePath();
      ctx.fillStyle = 'rgba(59,130,246,0.25)'; ctx.fill();
      ctx.beginPath(); ctx.moveTo(pts[0][0], pts[0][1]);
      for (let i = 1; i < pts.length; i++) ctx.lineTo(pts[i][0], pts[i][1]);
      ctx.strokeStyle = '#2563eb'; ctx.lineWidth = 2; ctx.stroke();

      if (hover >= 0 && hover < pts.length) {
        const [x, y] = pts[hover]; ctx.strokeStyle = 'rgba(100,116,139,.7)'; ctx.beginPath();
        ctx.moveTo(x, margin);
        ctx.lineTo(x, H - margin); ctx.stroke(); ctx.fillStyle = '#2563eb'; ctx.beginPath();
        ctx.arc(x, y, 4, 0, Math.PI * 2); ctx.fill();
      }

      ctx.font = '12px Inter, system-ui'; ctx.fillStyle = '#4b5563';
      ctx.textAlign = 'center';
      for (let i = 0; i < n; i++) {
        const x = margin + innerW * (i / (n - 1));
        ctx.fillText(`${i + 1}-р сар`, x, H - margin + 6);
      }
      ctx.fillStyle = '#111827'; ctx.textAlign = 'center'; ctx.font = '16px Inter, system-ui';
      ctx.fillText('Зээлийн үлдэгдлийн график', W / 2, 24);

      return { margin, innerW, pts };
    }

    // ---------- recalc ----------
    let schedule = [], geomPay = null, geomBal = null;
    function recalc() {
      const P = +amountNum.value || 0, r = +rateNum.value || 0, n = +termNum.value || 1;
      const res = computeSchedule(P, r, n); schedule = res.schedule;
      kpiPayment.textContent = money(res.payment);
      kpiInterest.textContent = money(res.totalInterest);
      kpiTotal.textContent = money(res.totalPay);
      geomPay = drawPayments(schedule, -1);
      geomBal = drawBalance(schedule, Math.max(P, 1), -1);
    }

    // tooltips
    const showTip = (html, x, y) => {
      tip.innerHTML = html; tip.style.left = x + 'px';
      tip.style.top = y + 'px'; tip.style.display = 'block';
    };
    const hideTip = () => tip.style.display = 'none';

    paymentsCanvas.addEventListener('mousemove', e => {
      if (!geomPay) return; const rect = paymentsCanvas.getBoundingClientRect(), cx = (e.clientX - rect.left) * (paymentsCanvas.width / rect.width);
      const { margin, slot, bars } = geomPay;
      if (cx < margin || cx > (paymentsCanvas.width - margin)) {
        hideTip();
        drawPayments(schedule, -1); return;
      }
      let idx = Math.floor((cx - margin) / slot);
      idx = Math.max(0, Math.min(bars - 1, idx));
      drawPayments(schedule, idx); const s = schedule[idx];
      showTip(`<b>${idx + 1}-р сар</b>
        <div class="row"><span>Үндсэн зээл:</span><span class="v">${money(s.principal)}</span></div>
        <div class="row"><span>Бодогдсон хүү:</span><span class="v">${money(s.interest)}</span></div>
        <div class="row"><span>Нийт төлбөр:</span><span class="v">${money(s.payment)}</span></div>`, e.clientX, e.clientY);
    });
    paymentsCanvas.addEventListener('mouseleave', () => { hideTip(); drawPayments(schedule, -1); });

    balanceCanvas.addEventListener('mousemove', e => {
      if (!geomBal) return; const rect = balanceCanvas.getBoundingClientRect(), cx = (e.clientX - rect.left) * (balanceCanvas.width / rect.width);
      const { margin, innerW, pts } = geomBal; if (cx < margin || cx > (balanceCanvas.width - margin)) {
        hideTip();
        drawBalance(schedule, Math.max(+amountNum.value || 1, 1), -1); return;
      }
      let idx = Math.round(((cx - margin) / innerW) * (pts.length - 1));
      idx = Math.max(0, Math.min(pts.length - 1, idx));
      drawBalance(schedule, Math.max(+amountNum.value || 1, 1), idx);
      const bal = pts[idx][2];
      showTip(`<b>${idx + 1}-р сар</b><div class="row"><span>Үлдэгдэл:</span><span class="v">${money(bal)}</span></div>`, e.clientX, e.clientY);
    });
    balanceCanvas.addEventListener('mouseleave', () => { hideTip(); drawBalance(schedule, Math.max(+amountNum.value || 1, 1), -1); });

    document.getElementById('pdfBtn').addEventListener('click', () => window.print());
    document.getElementById('applyBtn').addEventListener('click', () => alert('UI demo — энд backend API-даа холбож илгээнэ.'));

    recalc();
  </script>
</body>

</html>