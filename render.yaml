  services:
    - type: web
      name: omnicredit-backend
      env: node
      region: singapore
      plan: free
      buildCommand: cd backend && npm install
      startCommand: cd backend && npm start
      envVars:
        - key: DATABASE_URL
          sync: false
        - key: JWT_SECRET
          sync: false
        - key: NODE_ENV
          value: production
        - key: PORT
          value: 5000
      healthCheckPath: /health

    - type: web
      name: omnicredit
      env: static
      plan: free
      buildCommand: echo "Static site"
      staticPublishPath: .
      routes:
        - type: rewrite
          source: /*
          destination: /index.html
      headers:
        - path: /*
          name: Cache-Control
          value: public, max-age=0, must-revalidate
